<div class="libro-form">
  <div class="page-toolbar">
    <div>
      <h2 class="page-title">{{ esEdicion ? 'Editar libro' : 'Nuevo libro' }}</h2>
      <div class="page-subtitle">Registro bibliografico con autores, ISBN y metadatos.</div>
    </div>
  </div>

  <form class="page-form">
    <div class="page-form-card">
      <div class="row g-3">
        <div class="col-md-8">
          <label class="form-label">Titulo</label>
          <input class="form-control" [(ngModel)]="libro.titulo" name="titulo" />
        </div>
        <div class="col-md-4">
          <label class="form-label">ISBN</label>
          <input class="form-control" [(ngModel)]="libro.isbn" name="isbn" />
        </div>

        <div class="col-md-8">
          <label class="form-label">Subtitulo</label>
          <input class="form-control" [(ngModel)]="libro.subtitulo" name="subtitulo" />
        </div>
        <div class="col-md-4">
          <label class="form-label">ISSN</label>
          <input class="form-control" [(ngModel)]="libro.issn" name="issn" />
        </div>

        <div class="col-md-4">
          <label class="form-label">Tipo material</label>
          <select class="form-select" [(ngModel)]="libro.tipoMaterialId" name="tipoMaterialId">
            <option [ngValue]="undefined">Seleccione...</option>
            <option *ngFor="let t of tiposMaterial" [ngValue]="t.id">{{ t.nombre }}</option>
          </select>
        </div>
        <div class="col-md-4">
          <label class="form-label">Categoria</label>
          <select class="form-select" [(ngModel)]="libro.categoriaId" name="categoriaId">
            <option [ngValue]="undefined">Seleccione...</option>
            <option *ngFor="let c of categorias" [ngValue]="c.id">{{ c.nombre }}</option>
          </select>
        </div>
        <div class="col-md-4">
          <label class="form-label">Editorial</label>
          <select class="form-select" [(ngModel)]="libro.editorialId" name="editorialId">
            <option [ngValue]="undefined">Seleccione...</option>
            <option *ngFor="let e of editoriales" [ngValue]="e.id">{{ e.nombre }}</option>
          </select>
        </div>

        <div class="col-12">
          <label class="form-label">Autores</label>
          <select class="form-select autores-select" multiple [(ngModel)]="libro.autoresIds" name="autoresIds">
            <option *ngFor="let a of autores" [ngValue]="a.id">{{ a.nombre }}</option>
          </select>
          <div class="form-text" *ngIf="autores.length === 0">No hay autores registrados.</div>
        </div>

        <div class="col-md-4">
          <label class="form-label">Idioma</label>
          <input class="form-control" [(ngModel)]="libro.idioma" name="idioma" />
        </div>
        <div class="col-md-4">
          <label class="form-label">Ano publicacion</label>
          <input type="number" class="form-control" [(ngModel)]="libro.anioPublicacion" name="anioPublicacion" />
        </div>
        <div class="col-md-4">
          <label class="form-label">Edicion</label>
          <input class="form-control" [(ngModel)]="libro.edicion" name="edicion" />
        </div>

        <div class="col-md-6">
          <label class="form-label">DOI</label>
          <input class="form-control" [(ngModel)]="libro.doi" name="doi" />
        </div>
        <div class="col-md-6">
          <label class="form-label">URL publica</label>
          <input class="form-control" [(ngModel)]="libro.urlPublica" name="urlPublica" />
        </div>

        <div class="col-12">
          <label class="form-label">Descripcion</label>
          <textarea class="form-control" rows="3" [(ngModel)]="libro.descripcion" name="descripcion"></textarea>
        </div>
        <div class="col-12">
          <label class="form-label">Palabras clave</label>
          <input class="form-control" [(ngModel)]="libro.palabrasClave" name="palabrasClave" />
        </div>

        <div class="col-12">
          <div class="page-actions d-flex gap-2 justify-content-end">
            <button class="btn btn-primary" type="button" (click)="guardar()">Guardar</button>
            <button class="btn btn-outline-secondary" type="button" (click)="cancelar()">Cancelar</button>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>
