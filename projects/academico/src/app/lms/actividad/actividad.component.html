<div class="container-fluid">
  <h3><b>Actividades por Semana</b></h3>

  <!-- Selector de Semana -->
  <div class="form-row mb-3">
    <div class="form-group col-md-8">
      <label>Semana</label>
      <select class="form-control" [(ngModel)]="Filtro.Id_Semana" (change)="cargarActividades()">
        <option *ngFor="let sem of Semanas" [value]="sem.Id_Semana">
          Semana {{ sem.Numero_Semana }}: {{ sem.Titulo }}
        </option>
      </select>
    </div>
  </div>

  <hr>

  <!-- Formulario de Actividad -->
  <div class="form-row">
    <div class="form-group col-md-6">
      <label>Título</label>
      <input type="text" class="form-control" [(ngModel)]="Actividad.Titulo">
    </div>
    <div class="form-group col-md-3">
      <label>Tipo</label>
      <select class="form-control" [(ngModel)]="Actividad.Tipo">
        <option value="Tarea">Tarea</option>
        <option value="Foro">Foro</option>
        <option value="Sincrónica">Sincrónica</option>
        <option value="Otro">Otro</option>
      </select>
    </div>
    <div class="form-group col-md-3">
      <label>Fecha de Entrega</label>
      <input type="datetime-local" class="form-control" [(ngModel)]="Actividad.Fecha_Entrega">
    </div>
  </div>

  <div class="form-group">
    <label>Descripción</label>
    <textarea class="form-control" rows="4" [(ngModel)]="Actividad.Descripcion"></textarea>
  </div>

  <div class="form-row">
    <div class="form-group col-md-3">
      <label>¿Requiere entrega?</label><br>
      <input type="checkbox" [(ngModel)]="Actividad.Requiere_Entrega"> Sí
    </div>
    <div class="form-group col-md-9">
      <label>Rúbricas (hasta 5 criterios)</label>
      <div class="form-row">
        <div class="col"><input class="form-control" type="number" [(ngModel)]="Actividad.Rubrica_1" placeholder="R1"></div>
        <div class="col"><input class="form-control" type="number" [(ngModel)]="Actividad.Rubrica_2" placeholder="R2"></div>
        <div class="col"><input class="form-control" type="number" [(ngModel)]="Actividad.Rubrica_3" placeholder="R3"></div>
        <div class="col"><input class="form-control" type="number" [(ngModel)]="Actividad.Rubrica_4" placeholder="R4"></div>
        <div class="col"><input class="form-control" type="number" [(ngModel)]="Actividad.Rubrica_5" placeholder="R5"></div>
      </div>
    </div>
  </div>

  <div class="form-group text-right">
    <button class="btn btn-success" (click)="grabar()">Guardar Actividad</button>
    <button class="btn btn-danger ml-2" (click)="cancelar()">Cancelar</button>
  </div>

  <hr>

  <!-- Tabla de Actividades -->
  <table class="table table-bordered table-sm">
    <thead class="thead-light">
      <tr>
        <th>Título</th>
        <th>Tipo</th>
        <th>Entrega</th>
        <th>Fecha</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let act of Actividades">
        <td>{{ act.Titulo }}</td>
        <td>{{ act.Tipo }}</td>
        <td>{{ act.Requiere_Entrega ? 'Sí' : 'No' }}</td>
        <td>{{ act.Fecha_Entrega | date:'short' }}</td>
        <td>
          <button class="btn btn-sm btn-info" (click)="editar(act)">Editar</button>
          <button class="btn btn-sm btn-danger ml-1" (click)="eliminar(act)">Eliminar</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>